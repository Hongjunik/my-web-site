<!DOCTYPE html> <!-- 1변: HTML 문서임을 브라우저에게 알려줌 -->
<html lang="en"> <!-- 2번: 문서의 언어를 영어로 설정 -->
<head>
  <meta charset="UTF-8" /> <!-- 3번: 글자가 깨지지 않도록 UTF-8로 문자 인코딩 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <!-- 4번: 모바일에서 화면이 잘 보이도록 설정 -->
  <title>Web Animation(canvas_js_css)[1단원-3]</title> <!-- 5번: 브라우저 탭에 보여질 제목 -->
  <style>
    body {
      margin: 0;
      padding: 0;
      text-align: center;
      font-family: sans-serif;
    }

    #canvas {
      background: #DCD7C9;
      display: block;
      margin: 0 auto;
    }

    /* PC에서는 600x600 고정 */
    @media (min-width: 769px) {
      #canvas {
      width: 600px;
      height: 600px;
      }
    }
  </style> <!-- 6번: 화면 스타일(CSS) 적용 완료 -->
</head>
<body>
  <canvas id="canvas"></canvas>

  <script>
    // 8번: JavaScript 코드 실행 시작

    const drawingBoard = document.getElementById('canvas'); // 9번: 캔버스 요소를 JS 변수로 가져오기
    const drawingPen = drawingBoard.getContext('2d');       // 10번: 2D로 그림 그릴 수 있는 도구 설정

    // 캔버스 크기를 CSS와 맞춰줌 (중요!)
    drawingBoard.width = drawingBoard.clientWidth;          // 11번: 실제 캔버스 너비를 CSS와 일치시킴
    drawingBoard.height = drawingBoard.clientHeight;        // 12번: 실제 캔버스 높이도 맞춰줌

    let x = (drawingBoard.width - 10) / 2; // 13번: 사각형의 시작 위치 (가운데 정렬)
    let y = (drawingBoard.height - 10) / 2;

    const moveAmount = 5; // 14번: 방향키 누를 때 이동할 거리(5픽셀)

    // 15번: 각각의 방향으로 이동하는 함수들
    function moveRight() {x = x + moveAmount;}
    function moveLeft() {x = x - moveAmount;}
    function moveDown() {y = y + moveAmount;}
    function moveUp() {y = y - moveAmount;}

    // 16번: 주인골(검정 사각형)을 그리는 함수
    function drawHero() {
      drawingPen.fillStyle = 'black';
      drawingPen.fillRect(x, y, 10, 10);
    }

    // 17번: 화면을 지우고 주인공을 다시 그림
    function draw() {
      drawingPen.clearRect(0, 0, drawingBoard.width, drawingBoard.height); // 이전 그림 지우기
      drawHero(); // 새 위치에 주인공 그리기
    }

    // 18번: 1초에 60번 반복해서 draw 함수 실행 (움직임을 부드럽게 보여줌)
    setInterval(draw, 16); // 60 FPS

    // PC 방향키 조작
    // 19번: 키보드를 누르면 해당 방향으로 이동하게 함
    document.addEventListener('keydown', (e) => {
      // 눌린 키(e,key)가 무엇인지 확인해서 아래 명령 실행
      switch (e.key) {
        case 'ArrowLeft': moveLeft(); break;    // 왼쪽 화살표 눌렀을 때
        case 'ArrowRight': moveRight(); break;  // 오른쪽 화살표 눌렀을 때
        case 'ArrowUp': moveUp(); break;        // 위쪽 화살표 눌렀을 때
        case 'ArrowDown': moveDown(); break;    // 아래쪽 화살표 눌렀을 때
      }
    });
  </script>

</body>
</html>

<!-- 1)
 자바스크립트(JavaScript)는 객체기반의 스크립트 프로그래밍 언어이다. 주로 웹 브라우저 내에서 사용되며,
 다른 응용 프로그램의 내장 객체에도 접근할 수 있는 기능도 있다.런타임과 같이 서버 프로그램밍에도 사용되고 있다. -->

<!-- 2),3)
 변수
     var           let            const
 재선언 가능    재선언 불가능    재선언 불가능
               재할당 가능      재할당 불가능
 호이스팅 가능  호이스팅 불가능  호이스팅 불가능
 함수 스코프    블록 스코프      블록 스코프
-->

<!-- 4)
 function은 함수를 정의하는데 사용된다. -->

<!-- 5)
 키가 눌렸을 때에 문자열로 된 키 값을 변수e에 담아서 화살표 함수로 전달한다.(lin 71)
 
 함수는
 여러가지 기능을 하는 코드를 한 단어로 묶고 싶을 때 (그리고 나중에 재사용할 때)
 입출력기능을 만들 때
 사용하는 것이 용이하다.

 *화살표 함수를 사용하는 이유* 입출력을 표현하는데 용이하다.
-->

<!-- 6)
 switch문에서는 기본적으로 case의 모든 조건문을 실행하기 때문에 break;를 작성한다.
 ArrowLeft에서 참이 되어 moveLeft가 실행되었다면 switch문이 끝나야 하지만 그러지 않고 다음 조건문을 실행하기 때문이다.
-->